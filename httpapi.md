# 版本

v0.1

# 通用约定
HttpApi仅支持post方法，报文内容采用JSON方式封装。数据编码统一采用UTF-8。

## 数据包定义
接口地址形为http://域名:端口/方法名，如http://127.0.0.1:18080/QryLastTicker

消息格式为json字符串

```json
{
    "param1":"参数1",
    "param2":"参数2",
    ……
}
```
## 合约关键字命名规则
证券分类简称_商品代码_合约代码（期数）

例如：国际原油1811

```
FO_CL_1811
```

主力合约没有合约代码（期数）部分

例如：国内原油主力合约

```
FI_sc
```

非期货品种没有合约代码（期数）部分

例如：表示数字货币比特币

```
D_BTC
```

证券分类简称表：

| ***中文名称*** | ***简称*** |
| -------------- | ---------- |
| 国际期货       | FO         |
| 国内期货       | FI         |
| 外汇           | C          |
| A股            | SA         |
| 港股           | SHK        |
| 美股           | SUS        |
| 数字货币       | D          |
| 维胜品种       | V          |

## 授权验证
示例：
```
Authorization: key e30ad8787157a549
```
# 接口描述
## 查询品种列表
### 方法名

```
/QryCommList
```
### 请求参数

```json
{}
```
### 返回参数

| ***名称***     | ***描述***   | ***数据类型*** | ***备注***                                                  |
| -------------- | ------------ | -------------- | ----------------------------------------------------------- |
| index          | 编号         | Int            | 排序用                                                      |
| securityType   | 证券类型简称 | string         | 定义参考【[合约关键字](httpapi?id=合约关键字命名规则)】章节 |
| exchangeNo     | 交易所代码   | String         |                                                             |
| exchangeName   | 交易所名称   | String         |                                                             |
| commodityNo    | 商品代码     | String         | 唯一标识                                                    |
| commodityName  | 商品名称     | String         | 中文名称                                                    |
| currencyNo     | 币种         | String         |                                                             |
| contractNum    | 每手乘数     | double         |                                                             |
| miniTickerSize | 最小变动     | double         |                                                             |
| dotSize        | 小数位数     | int            |                                                             |
| mainContractNo | 当前主力     | string         | 仅期货有效                                                  |
| contractNoList | 合约列表     | 数组           | 仅期货有效                                                  |

### 示例

```json
{
    "commodityName": "国际原油",
    "commodityNo": "CL",
    "contractNoList": [
        "2002",
        "2003",
        "2004",
        "2005",
        "2006",
        "2007"
    ],
    "contractNum": 0,
    "currencyNo": "USD",
    "dotSize": 2,
    "exchangeName": "纽约商业交易所",
    "exchangeNo": "NYMEX",
    "index": 69,
    "mainContractNo": "2002",
    "miniTickerSize": 0.01,
    "securityType": "FO"
}
```
## 查询最新行情数据

### 方法名

```
/QryLastQuote
```



### 请求参数

| ***名称***   | ***描述*** | ***是否必填*** | ***数据类型*** | ***备注***                                                  |
| ------------ | ---------- | -------------- | -------------- | ----------------------------------------------------------- |
| contractCode | 合约关键字 | 【必填】       | String         | 定义参考【[合约关键字](httpapi?id=合约关键字命名规则)】章节 |

### 示例

```json
{
	"contractCode":"FO_CL"
}
```



### 返回参数

| ***名称***     | ***数组下标*** | ***数据类型*** | ***备注***                                                  |
| -------------- | -------------- | -------------- | ----------------------------------------------------------- |
| 合约关键字     | 0              | string         | 定义参考【[合约关键字](httpapi?id=合约关键字命名规则)】章节 |
| 时间标志位     | 1              | string         | 精确到毫秒字符串                                            |
| 当日开盘       | 2              | Double         |                                                             |
| 最新           | 3              | Double         |                                                             |
| 当日最高       | 4              | Double         |                                                             |
| 当日最低       | 5              | Double         |                                                             |
| 成交量（当日） | 6              | Double         |                                                             |
| 持仓           | 7              | Double         |                                                             |
| 现量           | 8              | Double         |                                                             |
| 昨收盘         | 9              | Double         |                                                             |
| 昨结算         | 10             | Double         |                                                             |
| 卖价           | 11             | Double         |                                                             |
| 卖量           | 12             | Double         |                                                             |
| 买价           | 13             | Double         |                                                             |
| 买量           | 14             | Double         |                                                             |
| 成交额         | 15             | Double         |                                                             |
| 换手率         | 16             | Double         |                                                             |
| 均价（当日）   | 17             | Double         |                                                             |

### 示例

```json
{
    "code": 0,
    "data": [
        [
            "FO_CL_2002",
            "2020-01-09 10:06:56.135",
            59.99,
            60.15,
            60.31,
            59.69,
            23396,
            355552,
            1,
            59.61,
            59.61,
            60.16,
            17,
            60.14,
            20,
            0,
            0,
            0
        ]
    ],
    "message": "成功"
}
```



## 查询最新ticker数据

### 方法名

```
/QryLastTicker
```

### 请求参数

| ***名称***   | ***描述*** | ***是否必填*** | ***数据类型*** | ***备注***                                                  |
| ------------ | ---------- | -------------- | -------------- | ----------------------------------------------------------- |
| contractCode | 合约关键字 | 【必填】       | String         | 定义参考【[合约关键字](httpapi?id=合约关键字命名规则)】章节 |

### 示例

```json
{
	"contractCode":"FO_CL"
}
```

### 返回参数

| ***名称***     | ***数组下标*** | ***数据类型*** | ***备注***                          |
| -------------- | -------------- | -------------- | ----------------------------------- |
| 合约关键字     | 0              | string         | 定义参考【合约关键字】章节          |
| 时间标志位     | 1              | string         | 精确到毫秒字符串                    |
| 买卖方向       | 2              | int            | 内外盘1; //外盘2; //内盘3; //中性盘 |
| 价格           | 3              | Double         |                                     |
| 成交量（当前） | 4              | Double         |                                     |

### 示例

## 查询历史行情数据

### 方法名

```
/QryHistoryQuote
```

### 请求参数

| ***名称***   | ***描述***     | ***是否必填*** | ***数据类型***     | ***备注***                                         |
| ------------ | -------------- | -------------- | ------------------ | -------------------------------------------------- |
| contractCode | 合约代码       | 【必填】       | String             | 定义参考【[合约关键字】](#_合约关键字命名规则)章节 |
| period       | 周期           | 【必填】       | String             |                                                    |
| userDefined  | 用户自定义周期 |                | Json，参见下面定义 | 当period参数为USER_DEFINED有效                     |
| beginTime    | 开始时间       | 否             | String             | 格式为YYYY-MM-DD hh:mm:ss                          |
| endTime      | 结束时间       | 否             | String             | 格式为YYYY-MM-DD hh:mm:ss                          |
| count        | 查询条数       | 否             | uInt               | 默认为0                                            |
| askBid       |                | 否             | Bool               | 外汇专用                                           |

其中，period的有效值如下

| ***取值***    | ***备注*** |
| ------------- | ---------- |
| KLINE_UNKNOWN | 分时       |
| KLINE_1MIN    | 1分钟      |
| KLINE_5MIN    | 5分钟      |
| KLINE_15MIN   | 15分钟     |
| KLINE_30MIN   | 30分钟     |
| KLINE_1HR     | 1小时      |
| KLINE_2HR     | 2小时      |
| KLINE_4HR     | 4小时      |
| KLINE_12HR    | 12小时     |
| KLINE_1DAY    | 1天        |
| USER_DEFINED  | 用户自定义 |

用户自定义周期时，userDefined参数

| ***名称*** | ***描述*** | ***是否必填*** | ***数据类型*** | ***备注***                                                   |
| ---------- | ---------- | -------------- | -------------- | ------------------------------------------------------------ |
| unit       | 单位       | 是             | String         | unit的值有：MINUTE、HOUR、DAY                                |
| value      | 数值       | 是             | Int            | value的取值范围为：MINUTE（1-1440）、HOUR（1-24）、DAY（1-100） |

### 返回参数

| ***\*名称\**** | ***\*描述\**** | ***\*数据类型\**** | ***\*备注\**** |
| -------------- | -------------- | ------------------ | -------------- |
| contractCode   | 合约代码       | String             |                |
| period         | 周期           | String             |                |
| count          | 结果数量       |                    |                |
| lines          | 数据集         | array              |                |

其中，数据集格式为

```json
[
    [
        时间，
        收盘价格，
        开盘价格，
        Low价格，
        Hight价格，
        当日总成交量，
    ],
    ……
]
```



### 示例1

### 示例2

